# 复合索引


    在查询中,不管有多少索引,MySQL最多只会选择一个索引,当需要二级查询的时候,MySQL可能就会进行全表扫描
    这意味着我们使用索引快速得到一列数据后,为了二级数据又开始全表扫描,影响到效率,于是复合索引就登场了

    复合索引允许对多列创建索引,有了复合索引,我们可以快速找到位于两条件交叉的数据
    WHERE state ='CA' and POINTS > 1000;

## 创建一个复合索引
```MySQL
# 创建一个复合索引,列的前后顺序是有意义的
CREATE INDEX idx_state_points ON customers (state,points);

# 得到的索引行数已经大幅减少,速度同时提升
EXPLAIN SELECT customer_id FROM customers
WHERE state ='CA' and POINTS > 1000;
```

## 复合索引意义

* 复合索引可以包含多个索引
* 如果某个索引中存在多列,数据排序也会加快
* 在复合索引中,MySQL的优化查询会做的更好
* 现实中多数情况,我们应该使用复合索引,因为一个查询可以有多个筛选器
* 索引还可以帮助我们更快地对数据进行排序
==创建复合索引后,可以删除原来的单列索引==

 
    许多初学者会犯的一个错误是: 为每一个列创建单独的索引,**但是实际上这些索引只能搞定一半工作,却不能帮助我们获得最佳性能**并且他们占用很多空间,当需要修改表中数据时,必须要更新这些索引**导致入操作变慢**

    MySQL会自动将表的主键包含在每个二级索引中,所以单个列的索引会浪费很多空间,因此使用复合索引会更好
    MySQL中,一个索引最多可以包含16列,一般4~6行就能达到很好的性能,具体的列数取决于实践

