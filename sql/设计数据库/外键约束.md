# 外键约束


    当你的表中有外键,你需要为外键设置约束,它本质可以保护你的数据不被损坏

* 打开底部“外键菜单”可以查看外键
* 我们不应该更改主键,这是一种==陋习==
* 当主键真的被更改后,在右侧菜单可以设置外键行为: 当主键被`删除/更新`时会进行什么操作++++

### 外键更新行为
`CASCADE` 当主键更新时,外键也会`同时更新`
`RESTRICT` 当主键更新时,外键会`拒绝更新`
`SET NULL`当主键更新时,外键会`设为NULL`
**SET NULL会让子表的一条记录失去父表关联,称为孤儿记录**孤儿记录是不良记录,尽量避免之
`NO ACTION`类似restrict,它防止或拒绝更新操作

### 外键删除行为
`CASCADE` 外键和主键同时被`删除`
`RESTRICT` &`NO ACTION`外键删除可以`拒绝删除`
**当我们需要保留数据时,可以使用上面的选项来保存已被删除的外键关联数据**

 一般来说,UPDATE选项设置为 `CASCADE` 同步更新
DELETE设置为`RESTRICT`&`NO ACTION`避免删除 
DELETE设置为`CASCADE`==看业务需求==同步删除

