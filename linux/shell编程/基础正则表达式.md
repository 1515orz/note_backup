# 正则表达式

## 正则表达式与通配符

* 正则表达式时用来在文件中匹配符合条件的==字符串==,正则是**包含匹配**, `grep awk sed`等命令可以支持正则表达式
* 通配符是来匹配符合条件的==文件名====,通配符是**完全匹配**`ls find cp`这些命令_不支持正则表达式_所以只能使用shell自己的通配符来匹配了
```
```
[通配符](../shell基础/通配符和其他特殊符号.md)
_包含匹配只需要含有,完全匹配必须要完全吻合_

_正则EXP_
`grep 'size' xxx.md` 在xxx.md中匹配“size”字串的行

## 正则表达式扩展
正则符号含义图[^图1]
`*` 前一个字符匹配**0次或任意多次**
`.` 匹配除了换行符外任意一个字符
`^` 匹配行首,例如`^hello`会匹配以 “hello”开头的字符
`$` 匹配行尾,例如`hello$`会匹配以 “hello”结尾的字符
`[]` 匹配括号中指定的任意一个字符,只匹配一个字符,例如`[abcde]`只匹配其中一个字符`[0-9]`同理
`[^]` 匹配除号中括号的字符意外的任意一个字符,`[0-9]`代表匹配除数字之外的字符*^代表取反*
`\` 转义符,用于取消特殊符号的含义
`\{n\}` 表示前面的字符恰好出现`n`次, 例如`{0-9}\{4\}`匹配四位数字`{1}[3-8][0-9]\{9]}`匹配手机号码
`\{n,\}` 表示其前面的字符出现不小于`n`次, 例如: `{0-9}\{2,\}`表示两位及以上的数字
`\{n,m}` 表示其前面的字符至少出现`n`次, 最多出现`m`次, 例如`[a-z]\{6,8}`匹配6-8位的小写字母

## 案例

> "*" 前一个字符匹配**0次或任意多次**
    * `grep 'a*' file` 列出所有内容*包括空白行* ,虽然'a'会被高亮
    * `grep 'aa*' file` 列出并匹配包含一个'a'的行
    * `grep 'aaa*' file` 列出有两个连续'a'的行

> "." 匹配除了换行符外任意一个字符
    * `grep 's..d' file'` 匹配在s和d之间*一定有两个字符*的单词
    * `grep 's.*d' file` 匹配s和d字母之间*有任意字符*的单词(包括0个)
    * `grep '.*' file` 匹配所有内容*因为正则是包含匹配,所以会全匹配*

> "^"匹配行首, "$"匹配行尾
    * `grep '^M' file` 匹配以'M'开头的行
    * `grep 'M$' file` 匹配以'M'结尾的行
    * `grep -n '^$'` *匹配空白行*并显示行号
> "[]" 匹配括号中指定的任意一个字符**只匹配一个字符**
    * `grep 's[sd]f' file` 匹配s和f字符中包含[s,d]的行

> "[^]" 匹配出中括号字符以外的任意一个字符**^在[]里面,代表取反**
    * `grep '^[^a-z]' file` 匹配不用小写字母开头的行
    * `grep '^[^a-zA-z]' file` 匹配不用字母开头的行

> "\" 转义符
    * `grep '\.$' file`  匹配以"."结尾的行,**转义符的作用是让符号被看作字符**
    
> "\{n\}" 表示其前面的字符恰好出现n次
    * `grep 'a\{3\}' file` 匹配字符*a***连续出现3次**的行
    * `grep '[0-9]\{3\}' file` 匹配数字**连续出现3次**的行
    
> "\{n,\}" 表示前面的字符不小于n次,*不过正则是包含匹配,大多数情况比较相似*
    * `grep '^[0-9]\{3,\}[a-z]' file` 匹配三个以上连续数字开头加一个小写字母的行
    
> "\{n,m\}" 匹配其前面的字符至少出现n次, 至多出现m次
    * `grep "sa\{1,3\}i" file` 匹配在字母`s`和字母`i`之间至少有1个a,最多有3个a的字符串
    

    
### 特殊例子
> `grep -n "^[0-9]" file` 匹配*以数字开头*的行并显示行号
> `grep -n "[^0-9]" file` 匹配*不以数字开头*的行并显示行号**因为^表示取反** 
> `grep '^[0-9]\{3,\}[a-z]' file` 这种情况下`\{n,\}`和`\{n\}`有区别


> 基础正则里没有`(), +, ?` 而在linux中有





[^图1]:
![Snipaste_2022-08-04_17-08-50](https://raw.githubusercontent.com/1515orz/IMGbed/main/note/linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%9F%BA%E7%A1%80%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.md/56591211245270.png)


